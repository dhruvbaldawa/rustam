# Task 1.5: Role Reveal Screen

## Goal

All players see their role simultaneously with the correct full-screen UI (green for theme, red for Rustam).

## Working Result

- When host starts round, all players' screens update simultaneously
- Regular players see: green background, theme name large
- Rustam sees: red background, "YOU ARE THE RUSTAM"
- Update happens within 500ms across all devices
- Screen is full-bleed, no navigation distractions

## Constraints

- Latency target: <500ms for all devices to update
- Full-screen color wash (green #22c55e or red #ef4444)
- Theme text 48px+ bold, readable at arm's length
- No exit button visible during active round (prevent accidental navigation)

## Dependencies

- Task 1.4 (Roles assigned and readable per-player)

<guidance>

## Listening for Role

Each player listens to their own role path:

```javascript
onValue(ref(db, `rooms/${roomCode}/roles/${uid}`), (snapshot) => {
  const role = snapshot.val();
  // role.isRustam, role.theme
});
```

Also listen to room status to know when round starts/ends.

## Screen States

Based on `room.status`:

- `"lobby"` â†’ Show waiting screen with player list
- `"active"` â†’ Show role reveal (green/red full screen)
- `"revealed"` â†’ Show who the Rustam was
- `"ended"` â†’ Show game over

## Role Reveal UI

**Regular Player (green):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         â”‚
â”‚   ğŸŸ¢ GREEN BACKGROUND   â”‚
â”‚                         â”‚
â”‚      Theme:             â”‚
â”‚   Kitchen Appliances    â”‚
â”‚                         â”‚
â”‚   Keep this secret!     â”‚
â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Rustam (red):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         â”‚
â”‚    ğŸ”´ RED BACKGROUND    â”‚
â”‚                         â”‚
â”‚    YOU ARE THE          â”‚
â”‚      RUSTAM             â”‚
â”‚                         â”‚
â”‚  Figure out the theme.  â”‚
â”‚      Blend in.          â”‚
â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Colors (from PRD)

- Safe player: `#22c55e` (green-500) background, white text
- Rustam: `#ef4444` (red-500) background, white text

## Prevent Navigation

During active round, don't show any navigation elements. Consider:

- Remove/hide header
- No back button
- Disable browser back (or handle gracefully)

</guidance>

## Validation Checklist

- [ ] When host starts round, player screens update
- [ ] Regular players see green screen with theme
- [ ] Rustam sees red screen without theme
- [ ] Update happens within ~500ms (test with multiple browser tabs)
- [ ] Theme text is large and readable
- [ ] Full-screen color (no white borders/margins)
- [ ] No navigation visible during active round
- [ ] Screen looks correct on mobile viewport